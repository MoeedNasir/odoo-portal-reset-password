<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!-- Step 1: Enter Email Form -->
    <template id="portal_reset_password_form" name="Portal Reset Password Form">
        <t t-call="website.layout">
            <div class="container mt-5">
                <h3>Reset Your Password</h3>
                <t t-if="error">
                    <div class="alert alert-danger">
                        <t t-esc="error"/>
                    </div>
                </t>
                <form method="post">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" class="form-control" required="required"/>
                    </div>
                    <button type="submit" class="btn btn-primary mt-2">Next</button>
                </form>
            </div>
        </t>
    </template>

    <!-- Step 2: Set Password -->
    <template id="portal_set_password_form" name="Portal Set Password Form">
        <t t-call="website.layout">
            <div class="container mt-5">
                <h3>Set New Password</h3>
                <t t-if="error">
                    <div class="alert alert-danger">
                        <t t-esc="error"/>
                    </div>
                </t>
                <form method="post" action="/portal/set_password">
                    <input type="hidden" name="portal_user_id" t-att-value="portal_user_id"/>
                    <div class="form-group">
                        <label>New Password</label>
                        <input type="password" name="new_password" class="form-control" required="required"/>
                        <small class="form-text text-muted">
                            Must be at least 8 characters long and contain letters and numbers.
                        </small>
                    </div>
                    <div class="form-group mt-2">
                        <label>Confirm Password</label>
                        <input type="password" name="confirm_password" class="form-control" required="required"/>
                    </div>
                    <button type="submit" class="btn btn-success mt-3">Save Password</button>
                </form>
            </div>
        </t>
    </template>

    <!-- Step 3: Success -->
    <template id="portal_reset_password_done" name="Portal Reset Password Done">
        <t t-call="website.layout">
            <div class="container mt-5">
                <div class="alert alert-success">
                    Password has been updated successfully for <t t-esc="user_email"/>.
                </div>
                <a href="/web/login" class="btn btn-primary">Go to Login</a>
            </div>
        </t>
    </template>
</odoo>
